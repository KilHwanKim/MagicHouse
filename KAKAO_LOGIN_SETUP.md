# 카카오 로그인 설정 가이드

## 에러 상황
- **에러 코드**: KOE004
- **에러 메시지**: 앱 관리자 설정 오류
- **원인**: 카카오 개발자 콘솔에서 카카오 로그인 기능이 활성화되지 않음

## 해결 방법

### 1단계: 카카오 개발자 콘솔 접속
1. https://developers.kakao.com 접속
2. 로그인 후 "내 애플리케이션" 클릭
3. 해당 애플리케이션 선택 (KAKAO_JS_KEY가 설정된 앱)

### 2단계: 카카오 로그인 활성화
1. 왼쪽 메뉴에서 **"제품 설정"** 클릭
2. **"카카오 로그인"** 섹션 찾기
3. **"활성화 설정"** → **"활성화"** 버튼 클릭
4. 저장

### 3단계: Redirect URI 설정
1. 왼쪽 메뉴에서 **"카카오 로그인"** 클릭
2. **"Redirect URI"** 탭 클릭
3. **"Redirect URI 등록"** 클릭
4. 다음 URI들을 **정확히** 추가 (슬래시 포함):
   - `http://localhost:3000/` (로컬 개발용 - **슬래시 포함**)
   - `https://magic-house-chi.vercel.app/` (배포 환경용 - **슬래시 포함**)
   - 또는 실제 사용하는 도메인 (슬래시 포함)
5. **저장** 클릭

**중요**: Redirect URI는 정확히 일치해야 합니다!
- `http://localhost:3000`과 `http://localhost:3000/`은 다릅니다
- 슬래시(`/`)도 정확히 일치해야 합니다
- 프로토콜(`http://` vs `https://`), 포트 번호도 정확히 일치해야 합니다

### 4단계: 동의 항목 설정 (선택사항)
**사용자 ID만 필요하고 닉네임/프로필 사진이 필요 없는 경우 동의 항목 설정은 불필요합니다.**

현재 코드는 동의 항목 없이 사용자 ID만 받도록 설정되어 있습니다.

**동의 항목이 필요한 경우에만:**
1. **"카카오 로그인"** → **"동의항목"** 탭 클릭
2. 필요한 동의 항목만 활성화:
   - **카카오계정(이메일)** (`account_email`): 선택 동의 또는 필수 동의
   - **닉네임** (`profile_nickname`): 선택 동의 또는 필수 동의
3. **저장** 클릭
4. 코드에서 `scope` 파라미터를 추가하여 동의 항목을 요청

**현재 설정 (동의 항목 없음):**
- 사용자 ID만 받아서 공유 기록을 구분하는 용도로 사용
- 닉네임, 프로필 사진, 이메일 등 추가 정보 불필요
- 동의 항목 설정 없이도 정상 작동

### 5단계: 플랫폼 설정 확인
1. 왼쪽 메뉴에서 **"앱 설정"** → **"플랫폼"** 클릭
2. **"Web 플랫폼"** 등록 확인
3. 사이트 도메인 등록:
   - `http://localhost:3000` (로컬)
   - `https://magic-house-chi.vercel.app` (배포)

### 6단계: 테스트
1. 설정 저장 후 몇 분 대기 (설정 반영 시간)
2. 애플리케이션에서 "다른 사람한테 보여주기" 버튼 클릭
3. 카카오 로그인 페이지가 정상적으로 표시되는지 확인

## 주의사항

### Redirect URI 정확히 일치해야 함
- `http://localhost:3000`과 `https://localhost:3000`은 다릅니다
- 마지막 슬래시(`/`)도 중요합니다
- 정확히 일치해야 합니다

### 설정 반영 시간
- 설정 변경 후 즉시 반영되지 않을 수 있습니다
- 보통 1-5분 정도 소요됩니다
- 그래도 안 되면 브라우저 캐시 삭제 후 재시도

### 로컬 개발 시
- 로컬에서 테스트하려면 `http://localhost:3000`을 Redirect URI에 등록해야 합니다
- HTTPS가 아닌 HTTP를 사용하는 경우 정확히 `http://`로 등록해야 합니다

## 문제 해결

### 여전히 KOE004 에러가 발생하는 경우
1. 카카오 로그인이 정말 활성화되었는지 확인
2. Redirect URI가 정확히 일치하는지 확인 (대소문자, 프로토콜, 포트 번호)
3. 브라우저 캐시 삭제 후 재시도
4. 카카오 개발자 콘솔에서 설정 저장 확인

### 다른 에러가 발생하는 경우
- KOE101: 잘못된 앱 키
- KOE006: Redirect URI 불일치
- KOE010: 동의 항목 오류

각 에러 코드에 맞는 해결 방법을 카카오 개발자 문서에서 확인하세요.

## 참고 링크
- [카카오 로그인 활성화 설정](https://developers.kakao.com/docs/latest/ko/kakaologin/prerequisite#kakao-login-activate)
- [인가 코드 관련 에러](https://developers.kakao.com/docs/latest/ko/kakaologin/trouble-shooting#code)
- [카카오 로그인 전체 가이드](https://developers.kakao.com/docs/latest/ko/kakaologin/common)
