# Arcane Archive — 구현 순서

실제 코드 작업 순서(의존성 반영). 체크리스트 형태로 진행 상황을 표시할 수 있다.

---

## 1. 영상물 API 연동 (영화/애니 검색)

- [ ] 백엔드: TMDB 또는 Jikan 클라이언트 구현 (API 키는 서버에만 두고, **백엔드 프록시**로 호출해 노출 방지).
- [ ] 백엔드: 검색 API 엔드포인트 노출 (예: `GET /api/search?q=...`).
- [ ] 프론트: 검색 입력 UI → 백엔드 검색 API 호출 → 결과 리스트 표시.
- [ ] **실시간 조회 UI**: 검색 API 호출 중 “검색 중…” / “대도서관에서 찾고 있습니다…” 텍스트 및 로딩 스피너(또는 버튼 비활성화) 적용.

---

## 2. OpenAI API로 질문 생성

- [ ] 백엔드: OpenAI API 연동 (API 키는 서버에만 보관).
- [ ] 백엔드: “영상 메타 받아서 질문 1개 생성” API 추가 (예: `POST /api/generate-question`, body: 영상 제목·장르·줄거리 등).
- [ ] 프론트: 영상 선택 후 “AI 마력 연성” 등 버튼 클릭 → 위 API 호출 → 생성된 질문 표시.
- [ ] **실시간 조회 UI**: OpenAI 호출 중 “질문을 연성하고 있습니다…” 텍스트 표시.

---

## 3. DB·백엔드 스키마 및 질문/답 저장

- [ ] DB: `books`, `questions`, `answers` 테이블 생성 (필요 시 `users` 테이블 스키마만 미리 정의).
- [ ] 백엔드: “첫 질문 생성 시 해당 영상에 대한 책(books) 생성” 로직 구현.
- [ ] 백엔드: 질문 저장 API (생성된 질문을 `questions`에 저장, 책이 없으면 책 먼저 생성).
- [ ] 백엔드: 답변 저장/수정 API (`answers`에 저장, 사용자 ID 또는 익명 ID 포함).
- [ ] 프론트: “기록 봉인” 등으로 답변 입력 후 저장 API 호출.
- [ ] **질문/답 저장 위치**: 위 스키마대로 **우리 서버 DB**에 저장하는 것으로 확정 구현.

---

## 4. 책 두꺼워짐 로직

- [ ] 백엔드: 책 목록 조회 시 **두께**(답 개수 또는 글자 수 합) 계산·포함. (권장: 답 개수 기준.)
- [ ] 프론트: 기존 그리모와(책) 컴포넌트를 **데이터 기반**으로 렌더링 (높이/두께를 API에서 받은 값으로 반영).

---

## 5. 비로그인(익명) 사용

- [ ] 익명 ID 생성·유지: 디바이스/세션별 UUID 등으로 식별.
- [ ] 답변 저장 시 “사용자 ID 또는 익명 ID”로 저장 가능하도록 이미 구현된 API 활용.
- [ ] “기록 봉인” 시 **로그인 없이** 익명 사용자도 답 저장 가능한지 확인 및 정리.

---

## 6. 로그인(선택)

- [ ] 이메일+비밀번호 또는 소셜 로그인(구글/카카오 등) 중 **하나 먼저** 구현.
- [ ] 로그인 시 토큰/세션 관리 및 “내 책 목록” 등 기기 간 동기화.
- [ ] (선택) 로그인 시 기존 익명 데이터를 계정에 연결할지 정책 정한 뒤, 필요 시 “익명 → 계정 병합” API/플로우 추가.

---

## 7. 카카오톡 공유

- [ ] Kakao Developers에서 앱 생성, JavaScript SDK 연동.
- [ ] 프론트: “이 질문 공유하기” 버튼 추가 → **질문 텍스트 + 서비스 링크**(해당 책/질문 페이지)를 카카오 메시지 템플릿으로 공유.

---

## 8. 실시간 조회 텍스트 정리

- [ ] 1·2단계에서 넣은 “검색 중/연성 중” 문구를 **한 곳**(상수 또는 설정)에 모아 일관된 문구·위치로 통일.
- [ ] 로딩 시 버튼 비활성화·스피너·텍스트 표시 방식 전반 점검.
