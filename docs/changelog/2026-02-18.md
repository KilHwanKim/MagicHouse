# 2026-02-18 - main.html 초기 생성 및 주요 기능 구현

## 새로 생성된 파일
- `main.html`: TMDB API를 통한 작품 검색 및 책 생성 기능이 포함된 메인 애플리케이션 파일

## 주요 기능 구현

### 1. TMDB API 통합
- **파일**: `main.html`
- **변경 내용**:
  - TMDB API를 사용한 작품 검색 기능 구현
  - 검색 모달 UI 추가 (`tmdb-search-modal`)
  - 검색 결과 표시 및 선택 기능
  - 선택한 작품의 제목으로 책 자동 생성

### 2. 플러스 버튼 배치 개선
- **파일**: `main.html` (373-389줄, 525-585줄)
- **변경 내용**:
  - 각 선반에 있던 플러스 버튼을 하나로 통합
  - 왼쪽 위(`shelf-1`)에만 플러스 버튼 배치
  - 책이 추가될 때마다 플러스 버튼이 마지막 책 옆으로 자동 이동
  - 왼쪽 위부터 순서대로 책을 채우는 방식으로 변경

### 3. 책 두께 고정
- **파일**: `main.html` (589-620줄)
- **변경 내용**:
  - 기존: 랜덤 두께 (45px ~ 85px)
  - 변경: 고정 두께 60px
  - 모든 책이 동일한 두께로 표시됨

### 4. 선반 너비 제한 로직 추가
- **파일**: `main.html` (525-585줄)
- **변경 내용**:
  - `getShelfAvailableWidth()` 함수 추가: 선반의 사용 가능한 너비 계산
  - `isShelfFull()` 함수 추가: 선반이 가득 찼는지 확인
  - 선반이 가득 차면 자동으로 다음 선반으로 플러스 버튼 이동
  - 책들이 선반 너비를 초과하지 않도록 제한

### 5. 책 높이 고정
- **파일**: `main.html` (589-620줄)
- **변경 내용**:
  - 기존: 랜덤 높이 (170px ~ 220px)
  - 변경: 고정 높이 190px
  - 모든 책이 동일한 높이로 표시됨

### 6. 책 제목 읽기 방향 수정
- **파일**: `main.html` (115-139줄)
- **변경 내용**:
  - 기존: `writing-mode: vertical-rl` (오른쪽에서 왼쪽으로 읽힘)
  - 변경: `writing-mode: vertical-lr` (왼쪽에서 오른쪽으로 읽힘)
  - 추가 스타일:
    - `text-orientation: upright`
    - `direction: ltr`
    - `word-break: keep-all`
    - `line-height: 1.4`
  - 긴 제목이 두 줄로 나뉠 때 왼쪽에서 오른쪽으로 자연스럽게 읽히도록 개선

## 기술 스택
- HTML5
- CSS3 (Tailwind CSS CDN)
- Vanilla JavaScript
- TMDB API (`/api/tmdb/search`)
- Gemini API (질문 생성용, 선택적)

## 참고 파일
- `tests/tmdb.html`: TMDB API 검색 구현 참고
- `마법사의 서고.html`: UI 구조 및 책 생성 로직 참고
- `index.html`: 추가 UI 참고 자료

## 주요 함수 목록
- `openTmdbSearchModal()`: TMDB 검색 모달 열기
- `doTmdbSearch()`: TMDB API 호출 및 검색 실행
- `selectWorkByIndex()`: 작품 선택 및 책 생성
- `addBookToNextAvailableShelf()`: 다음 사용 가능한 선반에 책 추가
- `createGrimoireElement()`: 책 요소 생성
- `getShelfAvailableWidth()`: 선반 사용 가능 너비 계산
- `isShelfFull()`: 선반 가득 참 확인
- `moveAddButtonToNextShelf()`: 플러스 버튼을 다음 선반으로 이동

## UI/UX 개선사항
- 책 추가 시 애니메이션 효과 (`book-appear` 클래스)
- 선반이 가득 차면 자동으로 다음 선반으로 이동
- 왼쪽 위부터 순서대로 책 배치로 일관성 있는 레이아웃
- 모든 책이 동일한 크기로 통일된 디자인

## 향후 개선 가능 사항
- 로컬 스토리지 연동 (현재 메모리 내에서만 저장)
- 책 삭제 기능
- 책 순서 변경 기능
- 선반별 책 개수 제한 설정 가능
